#Vars {{{
$SUBMAP_RESET=hyprctl dispatch submap reset

$REPEAT_RATE=75
$REPEAT_DELAY=250
#}}}

#external keyboard
device:By Tech Usb Gaming Keyboard {
    repeat_rate=$REPEAT_RATE
    repeat_delay=$REPEAT_DELAY
}

device:by-tech-usb-gaming-keyboard-1 {
    repeat_rate=$REPEAT_RATE
    repeat_delay=$REPEAT_DELAY
}

#keyboard attached to laptop
device:at-translated-set-2-keyboard {
    repeat_rate=$REPEAT_RATE
    repeat_delay=$REPEAT_DELAY
}

#tvmode submap{{{
submap=tvmode

binde=,KP_8,exec,pactl set-sink-volume $(pactl get-default-sink) +5% && send-volume-notif higher
binde=,KP_2,exec,pactl set-sink-volume $(pactl get-default-sink) -5% && send-volume-notif lower

submap=reset
#}}}

#applications submap {{{
submap=application_launch

bind=SUPER_SHIFT,O,exec,$SUBMAP_RESET; osu-lazer
bind=SUPER,M,exec,$SUBMAP_RESET; multimc
bind=SUPER,B,exec,$SUBMAP_RESET; gtk-launch Battle.net
bind=SUPER,r,exec,$SUBMAP_RESET; rssguard
bind=SUPER,a,exec,$SUBMAP_RESET; anki
bind=SUPER,p,exec,$SUBMAP_RESET; $TERMINAL -D $HOME $HOME/.local/scripts/play-song
bind=SUPER,O,exec,$SUBMAP_RESET; systemctl --user enable --now opentabletdriver; osu-stable
bind=SUPER,y,exec,$SUBMAP_RESET; $TERMINAL -D $HOME ytfzf -L $(echo | dmenu) | wl-copy

bind=,escape,submap,reset

submap=reset

bind=SUPER,g,submap,application_launch
#}}}

# Bookmarks {{{
submap=bookmarks
bind=SUPER,D,exec,$SUBMAP_RESET; $BROWSER_LITE "https://discord.com/login"
bind=SUPER,H,exec,$SUBMAP_RESET; $BROWSER "https://github.com/hyprwm/hyprland"
bind=SUPER,R,exec,$SUBMAP_RESET; $BROWSER "https://github.com/martinrotter/rssguard"
bind=,escape,submap,reset
submap=reset

bind=SUPER,b,submap,bookmarks
# }}}

# bind=CTRL,e,exec,wtype -M ctrl a;sleep 0.1; wtype $(wl-paste -p | sed 's/\([*_]\)/\\\1/g')

#misc system shrotcuts{{{
bind=SUPER,r,exec,"${MENU_LAUNCHER}"
bind=SUPER_SHIFT,r,exec,"${MENU_LAUNCHER}" mullvad-exclude; 
bind=SUPER,C,exec,d-calc
bind=,XF86Calculator,exec,d-calc
#bind=SUPER,S,exec,$BROWSER_SCRIPTING "$(echo "" | dmenu -p "Search")"
bind=SUPER,semicolon,exec,$TERMINAL -e pick-emoji
bind=SUPER_SHIFT,semicolon,exec,$TERMINAL -e pick-nerd-font
bind=SUPER,v,exec,scr-wayland
bind=SUPER_SHIFT,V,exec,save-img
bind=SHIFT,Print,exec,scr-wayland -o
bind=,Print,exec,grim -o $(hyprctl activeworkspace -j | jq -r '.monitor') /dev/stdout | wl-copy && notify-send "Screenshot" "$(hyprctl activeworkspace -j | jq -r '.monitor')"
bind=SUPER,p,exec,hyprpicker -a; zenity --color-selection --color="$(wl-paste)"
bind=SUPER_SHIFT,p,exec,gcolor3
bind=SUPER_ALT,semicolon,exec,$LOCKER
bind=SUPER_ALT,m,exec,mpv --no-terminal "$(wl-paste -p)" || mpv --no-terminal "$(wl-paste)"
bind=SUPER_ALT,slash,exec,hyprkeys -m -b | quickmd -
bind=SUPER,o,exec,linkhandler "$(wl-paste)"
bind=SUPER_ALT,o,exec,linkhandler "$(wl-paste)"
#}}}

bind=SUPER_ALT,s,exec,hyprctl keyword decoration:screen_shader "$(find $HOME/.config/hypr/shaders/ | sed -n '2,$p' | rofi -dmenu -theme nord)"
bind=SUPER_ALT_SHIFT,s,exec,hyprctl keyword decoration:screen_shader ""

#audio shenanegons {{{

$MIC_5_HIGHER=pactl set-source-volume $(pactl get-default-source) +5% && send-volume-notif mic-higher
$MIC_1_HIGHER=pactl set-source-volume $(pactl get-default-source) +1% && send-volume-notif mic-higher
$MIC_5_LOWER=pactl set-source-volume $(pactl get-default-source) -5% && send-volume-notif mic-higher
$MIC_1_LOWER=pactl set-source-volume $(pactl get-default-source) -1% && send-volume-notif mic-higher

#mic higher
bind=ALT,XF86AudioRaiseVolume,exec,$MIC_5_HIGHER
bind=SUPER_ALT,F8,exec,$MIC_5_HIGHER

#mic lower
bind=SUPER_ALT,F7,exec,$MIC_5_LOWER
bind=ALT,XF86AudioLowerVolume,exec,$MIC_5_LOWER

#mic higher 1%
bind=ALT_SHIFT,XF86AudioRaiseVolume,exec,$MIC_1_HIGHER
bind=SUPER_SHIFT_ALT,F8,exec,$MIC_1_HIGHER

#mic lower 1%
bind=SUPER_SHIFT_ALT,F7,exec,$MIC_1_LOWER
bind=SHIFT_ALT,XF86AudioLowerVolume,exec,$MIC_1_LOWER

$VOLUME_5_LOWER=pactl set-sink-volume $(pactl get-default-sink) -5% && send-volume-notif lower
$VOLUME_1_LOWER=pactl set-sink-volume $(pactl get-default-sink) -1% && send-volume-notif lower
$VOLUME_5_HIGHER=pactl set-sink-volume $(pactl get-default-sink) +5% && send-volume-notif lower
$VOLUME_1_HIGHER=pactl set-sink-volume $(pactl get-default-sink) +1% && send-volume-notif lower

#volume (yes all of this is volume)
binde=SUPER,F7,exec,$VOLUME_5_LOWER
binde=,XF86AudioLowerVolume,exec,$VOLUME_5_LOWER
binde=SUPER_SHIFT,F7,exec,$VOLUME_1_LOWER
binde=,XF86AudioLowerVolume_Shift,exec,$VOLUME_1_LOWER
binde=SUPER_SHIFT,F8,exec,$VOLUME_1_HIGHER
binde=,XF86AudioRaiseVolume_Shift,exec,$VOLUME_1_HIGHER
binde=SUPER,F8,exec,$VOLUME_5_HIGHER
binde=,XF86AudioRaiseVolume,exec,$VOLUME_5_HIGHER

$TOGGLE_AUDIO=pactl set-sink-mute $(pactl get-default-sink) toggle

binde=SUPER,F5,exec,$TOGGLE_AUDIO
binde=,XF86AudioMute,exec,$TOGGLE_AUDIO
#}}}


#mullvad {{{
bind=SUPER,F1,exec,mullvad-sxhkd
bind=SUPER,F2,exec,mullvad relay list | grep "^[[:alpha:]]" | rofi -dmenu -theme nord | cut -d " " -f2 | tr -d "()" | xargs mullvad relay set location
#}}}

# Generic Program Launchers {{{
bind=SUPER,E,exec,$MATRIX
bind=SUPER_SHIFT,E,exec,$EMAIL
bind=SUPER,RETURN,exec,$TERMINAL
bind=SUPER_SHIFT,RETURN,exec,$TERMINAL nvim +term +startinsert
bind=SUPER,T,exec,$BROWSER
bind=,XF86HomePage,exec,$BROWSER
bind=SUPER_SHIFT,T,exec,$BROWSER_LITE
bind=SUPER_ALT,T,exec,firefox --ProfileManager
bind=SUPER,z,exec,$TERMINAL -e $SYSMON
bind=SUPER_SHIFT,z,exec,$TERMINAL -e nvtop
# }}}

# Misc programs {{{
bind=SUPER,Slash,exec,echo "" | dmenu -p "command" | bash | tr -d "\n" | wl-copy
bind=SUPER_SHIFT,Slash,exec,linkhandler $(wl-paste)
bind=SUPER,x,exec,cp-pass
bind=SUPER_SHIFT,x,exec,cp-pass otp
bind=SUPER,a,exec,$TERMINAL -e ${FILEMANAGER-ranger}
#bind=SUPER,g,exec,$HOME/Programs/Coding\ Projects/bash/bookmark-mgr/bookmark-mgr
bind=SUPER,w,exec,wifi-con
bind=SUPER_CTRL,k,exec,kanji -z add
bind=SUPER_CTRL_ALT,k,exec,kanji list | grep '^\[.*\]$' | tr -d '[]' | rofi -theme nord -dmenu | wl-copy
# }}}

#window management{{{
bind=SUPER,Q,killactive
bind=SUPER_SHIFT_ALT,R,exit
bind=SUPER,SPACE,togglefloating
bind=SUPER_SHIFT,SPACE,pin
bind=SUPER,F,fullscreen
bind=SUPER,F3,exec,tv-mode
bind=SUPER,h,movefocus,l
bind=SUPER,l,movefocus,r
bind=SUPER,k,movefocus,u
bind=SUPER,j,movefocus,d

bind=SUPER,u,focusurgentorlast

bind=SUPER,n,cyclenext
bind=SUPER_SHIFT,n,cyclenext,prev

bind=SUPER_ALT,r,forcerendererreload

bind=SUPER,1,workspace,1
bind=SUPER,2,workspace,2
bind=SUPER,3,workspace,3
bind=SUPER,4,workspace,4
bind=SUPER,5,workspace,5
bind=SUPER,6,workspace,6
bind=SUPER,7,workspace,7
bind=SUPER,8,workspace,8
bind=SUPER,9,workspace,9
bind=SUPER,0,workspace,10

bind=SUPER,minus,togglespecialworkspace
bind=SUPER_SHIFT,minus,movetoworkspace,special

submap=move_silent
bind=,1,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 1
bind=,2,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 2
bind=,3,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 3
bind=,4,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 4
bind=,5,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 5
bind=,6,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 6
bind=,7,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 7
bind=,8,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 8
bind=,9,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 9
bind=,0,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 0
bind=SUPER,1,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 1
bind=SUPER,2,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 2
bind=SUPER,3,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 3
bind=SUPER,4,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 4
bind=SUPER,5,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 5
bind=SUPER,6,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 6
bind=SUPER,7,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 7
bind=SUPER,8,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 8
bind=SUPER,9,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 9
bind=SUPER,0,exec,$SUBMAP_RESET; hyprctl dispatch movetoworkspacesilent 0
bind=,escape,submap,reset
submap=reset

bind=SUPER,m,submap,move_silent

bind=SUPER_SHIFT,1,movetoworkspace,1
bind=SUPER_SHIFT,2,movetoworkspace,2
bind=SUPER_SHIFT,3,movetoworkspace,3
bind=SUPER_SHIFT,4,movetoworkspace,4
bind=SUPER_SHIFT,5,movetoworkspace,5
bind=SUPER_SHIFT,6,movetoworkspace,6
bind=SUPER_SHIFT,7,movetoworkspace,7
bind=SUPER_SHIFT,8,movetoworkspace,8
bind=SUPER_SHIFT,9,movetoworkspace,9
bind=SUPER_SHIFT,0,movetoworkspace,10

binde=SUPER_ALT,h,resizeactive,-20 0
binde=SUPER_ALT,l,resizeactive,20 0
binde=SUPER_ALT,j,resizeactive,0 20
binde=SUPER_ALT,k,resizeactive,0 -20

binde=SUPER_ALT,y,moveactive,-20 0
binde=SUPER_ALT,o,moveactive,20 0
binde=SUPER_ALT,u,moveactive,0 20
binde=SUPER_ALT,i,moveactive,0 -20

bind=SUPER_SHIFT,period,movewindow,mon:+1
bind=SUPER_ALT,period,movecurrentworkspacetomonitor,+1
bind=SUPER,period,focusmonitor,+1

bind=SUPER_ALT,d,focuswindow,title:Discord
bind=SUPER_ALT,o,focuswindow,title:osu
bind=SUPER_ALT,v,exec,hyprctl clients | grep -- -\> | rofi -dmenu -theme nord | sed -n 's/Window \([^ ]*\).*/\1/p' | xargs -I{} hyprctl dispatch focuswindow address:0x{}


bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

monitor=HDMI-A-1,1920x1080@75,1920x0,1
monitor=DP-1,1920x1080@165,0x0,1
monitor=DP-2,disable

workspace=1,monitor:HDMI-A-1
workspace=3,monitor:HDMI-A-1
workspace=5,monitor:HDMI-A-1
workspace=7,monitor:HDMI-A-1
workspace=9,monitor:HDMI-A-1

workspace=2,monitor:DP-1
workspace=4,monitor:DP-1
workspace=6,monitor:DP-1
workspace=8,monitor:DP-1
#}}}

#window rules {{{
# Playlist rules {{{
windowrulev2=bordercolor rgb(00ffe2),title:playlist.*foot
windowrulev2=workspace special,title:playlist.*foot
windowrulev2=bordersize 10,title:playlist.*foot
windowrulev2=float,title:playlist.*foot
windowrulev2=size 500 50,title:playlist.*foot
windowrulev2=move 100%-510 100%-60,title:playlist.*foot
# }}}

#windowrulev2=immediate,class:^osu!$
#windowrulev2=immediate,class:.*steam.*
windowrulev2=float,title:swayimg
windowrulev2=forceinput,title:^osu!
windowrulev2=bordercolor rgb(ff00a3),title:^osu!
windowrulev2=windowdance,class:zoom
windowrulev2=nofocus,class:ytfzf-foot
windowrule=windowdance,title:.*
windowrulev2=float,class:.*gcolor.*
windowrulev2=opacity 0.8 0.8,title:^(Steam Sign In)$
#}}}

input {
    numlock_by_default = true
}

misc {
    enable_swallow=true
    swallow_regex=.*foot.*
}

master {
    bind=SUPER_SHIFT,j,layoutmsg,swapnext
    bind=SUPER_SHIFT,k,layoutmsg,swapprev
    bind=SUPER_SHIFT,h,layoutmsg,addmaster
    bind=SUPER_SHIFT,l,layoutmsg,removemaster
    bind=SUPER_SHIFT,m,layoutmsg,swapwithmaster

    inherit_fullscreen=false
}

animations {
    bezier=linear, 0.49, 0, 1, 0.49 
    bezier=overshot,0.05,0.9,0.1,1.1
    bezier=exponential,0,0,0.01,1 
    bezier=ease-in,0.12, 0, 0.39, 0
    animation=windowsIn,0,1.0,linear,popin
    animation=windowsOut,0,1.0,linear,popin
    animation=windowsMove,0,0.5,linear,
    animation=fadeIn,1,1.0,ease-in,
    animation=fadeOut,1,1.0,ease-in,
}

general {
    col.inactive_border=rgba(00000000)
    col.active_border=rgba(6AC7DAff) rgba(7D71B7ff) 180deg
    layout = master
    max_fps=1000
    gaps_in=0
    gaps_out=5
    border_size=0
    #allow_tearing = true
}

decoration {
    rounding = 0
    drop_shadow = false
    dim_inactive = true
    dim_strength = 0.40
    # screen_shader=/home/euro/.config/hypr/blue.frag
    blur {
        new_optimizations = true
        xray = false
        size=2
        passes = 3
    }
}

windowrulev2=rounding 15,floating:1

env=WLR_DRM_NO_ATOMIC,1

exec-once="/home/euro/.config/wlinit"

exec-once="hyprctl setcursor Bibata-Modern-Ice 24"
